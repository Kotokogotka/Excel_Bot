Telegram бот для учета посещаемости
Этот проект представляет собой Telegram-бот, разработанный для учета посещаемости. Бот предоставляет функционал для вывода информации о посещаемости и выполнения отметки в Google Таблице.

Установка

1) Установите все необходимые зависимости, запустив следующую команду:
pip install -r requirements.txt

2) Создайте файл config.env и укажите в нем следующие переменные окружения:
BOT_TOKEN=ваш_токен_телеграм_бота

Использование
Запустите бота, запустив файл main.py:

python main.py
Добавьте бота в группу или напишите ему личное сообщение в Telegram.

Функционал

Команда /start: При получении этой команды и нахождении пользователя в состоянии default_state, бот отправляет приветственное сообщение с описанием доступных команд.

Команда /help: При получении этой команды бот отправляет сообщение с описанием доступных команд или помощью.

Команда /statistic: При получении этой команды бот обрабатывает данные таблицы (с использованием функций get_google_sheet_api(), get_sheet_data() и process_sheet_data()) и создает текстовый файл "start.txt" с информацией о посещаемости. Затем он отправляет содержимое файла в ответном сообщении.

Команда /cancel (в состоянии default_state): При получении этой команды и нахождении пользователя в состоянии default_state, бот отправляет сообщение о том, что нет активных процессов для отмены.

Команда /cancel (не в состоянии default_state): При получении этой команды и нахождении пользователя не в состоянии default_state, бот отправляет сообщение о выходе из текущего процесса и очищает состояние FSMContext.

Команда /custom: При получении этой команды бот запускает процесс ввода номера тренировки от 1 до 9. Он также устанавливает состояние CustomProcessStates.waiting_for_number.

Обратный вызов на кнопку (состояние CustomProcessStates.waiting_for_number): При нажатии кнопки на клавиатуре бот получает номер тренировки из обратного вызова и обновляет данные состояния FSMContext. Затем он переходит в состояние CustomProcessStates.waiting_for_symbol и вызывает функцию process_change_sheet() для обработки символов.

Ввод символов (состояние CustomProcessStates.waiting_for_symbol): При получении сообщения в этом состоянии бот получает данные состояния FSMContext и выполняет обработку символов. Он проверяет корректность символов и вызывает функцию process_sheet_data() для обновления таблицы с помощью введенных данных. Затем бот отправляет ответное сообщение и, если есть еще ребенок для ввода символов, переходит к следующему ребенку. Когда все ребенки обработаны, бот отправляет сообщение о завершении ввода символов и очищает состояние FSMContext.

Хэндлер send_echo: Этот хэндлер срабатывает на любые сообщения, кроме команд и вне состояний default_state. Бот отправляет ответное сообщение, сообщая, что не понял запрос пользователя, и предлагает использовать команды /start или /help для получения помощи.
